# ç« èŠ‚å±‚çº§é™åˆ¶æµ‹è¯•

## å®ç°çš„åŠŸèƒ½

1. **ç« èŠ‚å±‚çº§è®¡ç®—**: åœ¨ `ChapterRepository.create()` ä¸­è‡ªåŠ¨è®¡ç®—å±‚çº§
   - æ ¹ç« èŠ‚: level = 1
   - å­ç« èŠ‚: level = parent.level + 1

2. **å±‚çº§é™åˆ¶éªŒè¯**: æœ€å¤šå…è®¸ 3 å±‚ç« èŠ‚ç»“æ„
   - ç¬¬1å±‚: å· (level = 1)
   - ç¬¬2å±‚: ç«  (level = 2) 
   - ç¬¬3å±‚: èŠ‚ (level = 3)

3. **å‰ç«¯UIé™åˆ¶**: ChapterTreeNode.vue ä¸­çš„ "æ·»åŠ å­ç« èŠ‚" æŒ‰é’®
   - åªæœ‰å½“ `(chapter.level || 1) < 3` æ—¶æ‰æ˜¾ç¤º âœ… **å·²ä¿®å¤**
   - å³å±‚çº§1å’Œ2å¯ä»¥åˆ›å»ºå­ç« èŠ‚ï¼Œå±‚çº§3ä¸èƒ½åˆ›å»ºå­ç« èŠ‚

## ä¿®å¤å†å²

**é—®é¢˜**: ä¹‹å‰çš„æ¡ä»¶æ˜¯ `v-if="(chapter.level || 1) <= 3"`ï¼Œå¯¼è‡´ç¬¬ä¸‰çº§ç« èŠ‚ä»ç„¶æ˜¾ç¤ºæ·»åŠ å­ç« èŠ‚æŒ‰é’®

**ä¿®å¤**: æ”¹ä¸º `v-if="(chapter.level || 1) < 3"`ï¼Œç¡®ä¿åªæœ‰å±‚çº§1å’Œ2å¯ä»¥åˆ›å»ºå­ç« èŠ‚

## æµ‹è¯•æ­¥éª¤

1. åˆ›å»ºæ ¹ç« èŠ‚ (level 1) âœ… - æ˜¾ç¤ºæ·»åŠ å­ç« èŠ‚æŒ‰é’®
2. åœ¨æ ¹ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ (level 2) âœ… - æ˜¾ç¤ºæ·»åŠ å­ç« èŠ‚æŒ‰é’®  
3. åœ¨level 2ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ (level 3) âœ… - ä¸æ˜¾ç¤ºæ·»åŠ å­ç« èŠ‚æŒ‰é’®
4. å°è¯•åœ¨level 3ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ âœ… - è¢«UIé˜»æ­¢ï¼Œå³ä½¿é€šè¿‡APIä¹Ÿä¼šè¢«åç«¯é˜»æ­¢

## é¢„æœŸè¡Œä¸º âœ…

- åœ¨level 3ç« èŠ‚æ—è¾¹ä¸æ˜¾ç¤º "ğŸ“" (æ·»åŠ å­ç« èŠ‚) æŒ‰é’®
- å³ä½¿é€šè¿‡APIå°è¯•åˆ›å»ºlevel 4ç« èŠ‚ï¼Œåº”è¯¥æŠ›å‡ºé”™è¯¯: "ç« èŠ‚å±‚çº§ä¸èƒ½è¶…è¿‡3å±‚"

## å±‚çº§ç»“æ„å›¾ç¤º

```
ä½œå“æ ¹ç›®å½•
â”œâ”€â”€ ç¬¬ä¸€éƒ¨ (level 1) [ğŸ“„][ğŸ“][âœï¸][ğŸ—‘ï¸]
â”‚   â”œâ”€â”€ ç¬¬ä¸€ç«  (level 2) [ğŸ“„][ğŸ“][âœï¸][ğŸ—‘ï¸]
â”‚   â”‚   â”œâ”€â”€ ç¬¬ä¸€èŠ‚ (level 3) [ğŸ“„][âœï¸][ğŸ—‘ï¸]  â† ä¸æ˜¾ç¤ºğŸ“
â”‚   â”‚   â””â”€â”€ ç¬¬äºŒèŠ‚ (level 3) [ğŸ“„][âœï¸][ğŸ—‘ï¸]  â† ä¸æ˜¾ç¤ºğŸ“
â”‚   â””â”€â”€ ç¬¬äºŒç«  (level 2) [ğŸ“„][ğŸ“][âœï¸][ğŸ—‘ï¸]
â””â”€â”€ ç¬¬äºŒéƒ¨ (level 1) [ğŸ“„][ğŸ“][âœï¸][ğŸ—‘ï¸]
```

## æ—¥å¿—éªŒè¯

ä»å¯åŠ¨æ—¥å¿—å¯ä»¥çœ‹åˆ°ç« èŠ‚åˆ›å»ºæ—¶åŒ…å«äº† level å­—æ®µ:
```sql
INSERT INTO `main`.`chapters` (`id`, `work_id`, `parent_id`, `level`, `order_index`, ...)
```

è¿™è¯æ˜å±‚çº§é™åˆ¶åŠŸèƒ½å·²ç»æ­£ç¡®å®ç°å¹¶ä¿®å¤ã€‚