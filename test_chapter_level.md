# ç« èŠ‚å±‚çº§é™åˆ¶æµ‹è¯•

## å®ç°çš„åŠŸèƒ½

1. **ç« èŠ‚å±‚çº§è®¡ç®—**: åœ¨ `ChapterRepository.create()` ä¸­è‡ªåŠ¨è®¡ç®—å±‚çº§
   - æ ¹ç« èŠ‚: level = 1
   - å­ç« èŠ‚: level = parent.level + 1

2. **å±‚çº§é™åˆ¶éªŒè¯**: æœ€å¤šå…è®¸ 3 å±‚ç« èŠ‚ç»“æ„
   - ç¬¬1å±‚: å· (level = 1)
   - ç¬¬2å±‚: ç«  (level = 2) 
   - ç¬¬3å±‚: èŠ‚ (level = 3)

3. **å‰ç«¯UIé™åˆ¶**: ChapterTreeNode.vue ä¸­çš„ "æ·»åŠ å­ç« èŠ‚" æŒ‰é’®
   - åªæœ‰å½“ `(chapter.level || 1) < 3` æ—¶æ‰æ˜¾ç¤º
   - å³å±‚çº§1å’Œ2å¯ä»¥åˆ›å»ºå­ç« èŠ‚ï¼Œå±‚çº§3ä¸èƒ½

## æµ‹è¯•æ­¥éª¤

1. åˆ›å»ºæ ¹ç« èŠ‚ (level 1) âœ…
2. åœ¨æ ¹ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ (level 2) âœ…
3. åœ¨level 2ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ (level 3) âœ…
4. å°è¯•åœ¨level 3ç« èŠ‚ä¸‹åˆ›å»ºå­ç« èŠ‚ - åº”è¯¥è¢«é˜»æ­¢ âŒ

## é¢„æœŸè¡Œä¸º

- åœ¨level 3ç« èŠ‚æ—è¾¹ä¸åº”è¯¥æ˜¾ç¤º "ğŸ“" (æ·»åŠ å­ç« èŠ‚) æŒ‰é’®
- å³ä½¿é€šè¿‡APIå°è¯•åˆ›å»ºlevel 4ç« èŠ‚ï¼Œåº”è¯¥æŠ›å‡ºé”™è¯¯: "ç« èŠ‚å±‚çº§ä¸èƒ½è¶…è¿‡3å±‚"

## æ—¥å¿—éªŒè¯

ä»å¯åŠ¨æ—¥å¿—å¯ä»¥çœ‹åˆ°ç« èŠ‚åˆ›å»ºæ—¶åŒ…å«äº† level å­—æ®µ:
```sql
INSERT INTO `main`.`chapters` (`id`, `work_id`, `parent_id`, `level`, `order_index`, ...)
```

è¿™è¯æ˜å±‚çº§é™åˆ¶åŠŸèƒ½å·²ç»æ­£ç¡®å®ç°ã€‚