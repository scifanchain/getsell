import{d as x,x as U,r as m,c as y,a as u,b as e,e as v,n as _,w,m as p,v as c,t as b,o as d,s as C,_ as S}from"./main-BDtaMjOo.js";const h={class:"login-view"},q={class:"login-container"},B={class:"login-form"},L={class:"form-tabs"},D={class:"form-group"},F=["disabled"],G={class:"form-group"},M={class:"form-group"},N=["disabled"],R={key:2,class:"error-message"},$=x({__name:"LoginView",setup(z){const g=C(),n=U(),o=m("login"),r=m({email:""}),t=m({name:"",email:""}),i=y(()=>n.loading),f=y(()=>n.error);async function k(){if(r.value.email)try{await n.loginUser(r.value.email)&&g.push("/")}catch(a){console.error("登录失败:",a)}}async function V(){if(!(!t.value.name||!t.value.email))try{await n.createUser({name:t.value.name,email:t.value.email}),g.push("/")}catch(a){console.error("注册失败:",a)}}return(a,l)=>(d(),u("div",h,[e("div",q,[l[8]||(l[8]=e("div",{class:"login-header"},[e("h1",null,"欢迎使用 Gestell"),e("p",null,"优雅的写作工具，让创作更简单")],-1)),e("div",B,[e("div",L,[e("button",{onClick:l[0]||(l[0]=s=>o.value="login"),class:_([{active:o.value==="login"},"tab-btn"])}," 登录 ",2),e("button",{onClick:l[1]||(l[1]=s=>o.value="register"),class:_([{active:o.value==="register"},"tab-btn"])}," 注册 ",2)]),o.value==="login"?(d(),u("form",{key:0,onSubmit:w(k,["prevent"]),class:"form"},[e("div",D,[l[5]||(l[5]=e("label",null,"邮箱地址",-1)),p(e("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>r.value.email=s),type:"email",required:"",placeholder:"输入邮箱地址"},null,512),[[c,r.value.email]])]),e("button",{type:"submit",disabled:i.value,class:"btn btn-primary btn-full"},b(i.value?"登录中...":"登录"),9,F)],32)):v("",!0),o.value==="register"?(d(),u("form",{key:1,onSubmit:w(V,["prevent"]),class:"form"},[e("div",G,[l[6]||(l[6]=e("label",null,"用户名",-1)),p(e("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.name=s),type:"text",required:"",placeholder:"输入用户名"},null,512),[[c,t.value.name]])]),e("div",M,[l[7]||(l[7]=e("label",null,"邮箱地址",-1)),p(e("input",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.email=s),type:"email",required:"",placeholder:"输入邮箱地址"},null,512),[[c,t.value.email]])]),e("button",{type:"submit",disabled:i.value,class:"btn btn-primary btn-full"},b(i.value?"注册中...":"注册"),9,N)],32)):v("",!0),f.value?(d(),u("div",R,b(f.value),1)):v("",!0)]),l[9]||(l[9]=e("div",{class:"login-footer"},[e("p",null,"Gestell - 让写作成为享受")],-1))])]))}}),I=S($,[["__scopeId","data-v-3437e55b"]]);export{I as default};
