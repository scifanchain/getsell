# ğŸ” Gestell é¡¹ç›®æ¶æ„åˆ†æ - ç»“æ„é‡å¤é—®é¢˜è¯Šæ–­

## ğŸ“Š å½“å‰ç»“æ„åˆ†æ

### ğŸš¨ å‘ç°çš„é—®é¢˜

æ‚¨çš„è§‚å¯Ÿæ˜¯æ­£ç¡®çš„ï¼å½“å‰é¡¹ç›®ç¡®å®å­˜åœ¨**ç»“æ„é‡å¤å’ŒèŒè´£æ··ä¹±**çš„é—®é¢˜ï¼š

```
src/
â”œâ”€â”€ data/                    # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ interfaces/          # Repository æ¥å£
â”‚   â””â”€â”€ prisma/             # Repository å®ç°
â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚  
â”‚   â”œâ”€â”€ interfaces/         # Service æ¥å£
â”‚   â”œâ”€â”€ *Service.ts         # Service å®ç°
â”‚   â””â”€â”€ *IPCHandler.ts      # âŒ IPCå¤„ç†å™¨ï¼ˆä½ç½®é”™è¯¯ï¼‰
â”œâ”€â”€ ipc/                    # IPC é€šä¿¡å±‚
â”‚   â””â”€â”€ *IPCHandler.ts      # âŒ é‡å¤çš„IPCå¤„ç†å™¨
â””â”€â”€ ...
```

## ğŸ”¥ å…·ä½“é‡å¤é—®é¢˜

### 1. **IPCå¤„ç†å™¨é‡å¤**
```bash
# ç›¸åŒåŠŸèƒ½çš„æ–‡ä»¶å‡ºç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š
src/services/ChapterIPCHandler.ts    # âŒ é”™è¯¯ä½ç½®
src/ipc/ContentIPCHandler.ts         # âŒ éƒ¨åˆ†é‡å¤
```

### 2. **èŒè´£è¾¹ç•Œæ··ä¹±**
```typescript
// services/ æ–‡ä»¶å¤¹æ··åˆäº†ä¸¤ç§èŒè´£ï¼š
- ChapterService.ts      # âœ… æ­£ç¡®ï¼šä¸šåŠ¡é€»è¾‘
- ChapterIPCHandler.ts   # âŒ é”™è¯¯ï¼šIPCé€šä¿¡ä¸åº”åœ¨servicesä¸­
```

### 3. **æ¶æ„å±‚çº§ä¸æ¸…æ™°**
å½“å‰æ¶æ„è¿åäº†Clean Architectureçš„ä¾èµ–è§„åˆ™ï¼š
- **Serviceså±‚**åº”è¯¥ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸åº”åŒ…å«IPCé€šä¿¡
- **IPCå±‚**åº”è¯¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰é€šä¿¡å¤„ç†å™¨
- **Dataå±‚**æ­£ç¡®ï¼Œä½†å¯ä»¥ä¼˜åŒ–

## ğŸ’¡ å»ºè®®çš„æ­£ç¡®æ¶æ„

### ğŸ¯ ç†æƒ³çš„ç›®å½•ç»“æ„
```
src/
â”œâ”€â”€ domain/                 # ğŸ†• é¢†åŸŸå±‚ï¼ˆçº¯ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ entities/          # å®ä½“
â”‚   â”œâ”€â”€ interfaces/        # é¢†åŸŸæ¥å£
â”‚   â””â”€â”€ services/          # é¢†åŸŸæœåŠ¡
â”œâ”€â”€ application/           # ğŸ†• åº”ç”¨å±‚ï¼ˆç”¨ä¾‹å®ç°ï¼‰
â”‚   â”œâ”€â”€ services/          # åº”ç”¨æœåŠ¡
â”‚   â””â”€â”€ interfaces/        # åº”ç”¨æ¥å£
â”œâ”€â”€ infrastructure/        # ğŸ†• åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“å®ç°
â”‚   â”œâ”€â”€ repositories/      # Repositoryå®ç°
â”‚   â””â”€â”€ external/          # å¤–éƒ¨æœåŠ¡
â”œâ”€â”€ presentation/          # ğŸ†• è¡¨ç°å±‚
â”‚   â”œâ”€â”€ ipc/              # IPCé€šä¿¡å¤„ç†
â”‚   â”œâ”€â”€ ui/               # Vueç»„ä»¶
â”‚   â””â”€â”€ api/              # APIé€‚é…å™¨
â”œâ”€â”€ shared/               # ğŸ”„ å…±äº«å·¥å…·
â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ constants/        # å¸¸é‡
â””â”€â”€ main.ts              # ğŸ”„ å…¥å£æ–‡ä»¶
```

## ğŸ”§ ç«‹å³ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šæœ€å°åŒ–ä¿®å¤ï¼ˆæ¨èï¼‰
ä¿æŒå½“å‰å¤§æ¡†æ¶ï¼Œåªè§£å†³é‡å¤é—®é¢˜ï¼š

```bash
# 1. ç»Ÿä¸€IPCå¤„ç†å™¨åˆ° src/ipc/
src/ipc/
â”œâ”€â”€ ChapterIPCHandler.ts   # ä»servicesç§»åŠ¨è¿‡æ¥
â”œâ”€â”€ ContentIPCHandler.ts   # å·²å­˜åœ¨
â”œâ”€â”€ UserIPCHandler.ts      # å·²å­˜åœ¨
â”œâ”€â”€ WorkIPCHandler.ts      # å·²å­˜åœ¨
â”œâ”€â”€ SystemIPCHandler.ts    # å·²å­˜åœ¨
â””â”€â”€ IPCManager.ts          # ç»Ÿä¸€ç®¡ç†

# 2. services/ åªä¿ç•™çº¯ä¸šåŠ¡é€»è¾‘
src/services/
â”œâ”€â”€ ChapterService.ts      # âœ… ä¿ç•™
â”œâ”€â”€ ContentService.ts      # âœ… ä¿ç•™
â”œâ”€â”€ UserService.ts         # âœ… ä¿ç•™
â”œâ”€â”€ WorkService.ts         # âœ… ä¿ç•™
â”œâ”€â”€ interfaces/            # âœ… ä¿ç•™
â””â”€â”€ ServiceContainer.ts    # âœ… ä¿ç•™

# 3. data/ ç»“æ„ä¿æŒä¸å˜
src/data/
â”œâ”€â”€ interfaces/            # âœ… Repositoryæ¥å£
â”œâ”€â”€ prisma/               # âœ… Repositoryå®ç°
â””â”€â”€ RepositoryContainer.ts # âœ… ä¾èµ–æ³¨å…¥
```

### æ–¹æ¡ˆBï¼šå®Œæ•´é‡æ„ï¼ˆæœªæ¥è€ƒè™‘ï¼‰
é‡‡ç”¨æ ‡å‡†Clean Architectureç»“æ„ï¼Œä½†éœ€è¦å¤§é‡é‡æ„å·¥ä½œã€‚

## ğŸš€ æ¨èæ‰§è¡Œæ­¥éª¤

### Step 1: ç§»åŠ¨é‡å¤çš„IPCå¤„ç†å™¨
```bash
# å°† services/ ä¸­çš„IPCå¤„ç†å™¨ç§»åŠ¨åˆ° ipc/
mv src/services/ChapterIPCHandler.ts src/ipc/
# æ£€æŸ¥å¹¶åˆ é™¤é‡å¤ä»£ç 
```

### Step 2: æ›´æ–°å¼•ç”¨
```typescript
// æ›´æ–° main.ts ä¸­çš„å¯¼å…¥è·¯å¾„
- import { ChapterIPCHandler } from './services/ChapterIPCHandler';
+ import { ChapterIPCHandler } from './ipc/ChapterIPCHandler';
```

### Step 3: ç»Ÿä¸€IPCç®¡ç†
```typescript
// æ›´æ–° IPCManager.ts ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¤„ç†å™¨
export class IPCManager {
    private chapterHandler: ChapterIPCHandler;
    private contentHandler: ContentIPCHandler;
    // ... å…¶ä»–å¤„ç†å™¨
}
```

## ğŸ“ˆ é‡æ„æ”¶ç›Š

### âœ… ç«‹å³æ”¶ç›Šï¼ˆæ–¹æ¡ˆAï¼‰
- ğŸ¯ **èŒè´£æ¸…æ™°**ï¼šServicesä¸“æ³¨ä¸šåŠ¡ï¼ŒIPCä¸“æ³¨é€šä¿¡
- ğŸ”§ **æ˜“äºç»´æŠ¤**ï¼šä¸å†æœ‰é‡å¤ä»£ç 
- ğŸ›¡ï¸ **æ¶æ„æ¸…æ´**ï¼šç¬¦åˆåˆ†å±‚æ¶æ„åŸåˆ™
- ğŸ“± **å¼€å‘æ•ˆç‡**ï¼šå‡å°‘æ··ä¹±ï¼Œæé«˜ç”Ÿäº§åŠ›

### ğŸš€ é•¿æœŸæ”¶ç›Šï¼ˆæ–¹æ¡ˆBï¼‰
- ğŸ—ï¸ **æ ‡å‡†æ¶æ„**ï¼šå®Œå…¨ç¬¦åˆClean Architecture
- ğŸ§ª **æ˜“äºæµ‹è¯•**ï¼šæ¸…æ™°çš„ä¾èµ–è¾¹ç•Œ
- ğŸ“ˆ **å¯æ‰©å±•æ€§**ï¼šæ–°åŠŸèƒ½å®¹æ˜“æ·»åŠ 
- ğŸ› ï¸ **å¯ç»´æŠ¤æ€§**ï¼šä»£ç ç»„ç»‡æ›´åˆç†

## ğŸ¯ ç»“è®º

**æ‚¨çš„åˆ¤æ–­å®Œå…¨æ­£ç¡®ï¼** å½“å‰ç»“æ„ç¡®å®å­˜åœ¨é‡å¤å’Œä¸å¿…è¦çš„å¤æ‚æ€§ã€‚

**å»ºè®®ï¼š**
1. ğŸ”¥ **ç«‹å³æ‰§è¡Œæ–¹æ¡ˆA**ï¼šè§£å†³é‡å¤é—®é¢˜ï¼Œæå‡ä»£ç è´¨é‡
2. ğŸ“… **æœªæ¥è€ƒè™‘æ–¹æ¡ˆB**ï¼šå½“é¡¹ç›®è§„æ¨¡å¢é•¿æ—¶è¿›è¡Œå®Œæ•´é‡æ„
3. ğŸ›¡ï¸ **åˆ¶å®šè§„èŒƒ**ï¼šæ˜ç¡®å„å±‚çº§çš„èŒè´£è¾¹ç•Œ

è¿™æ ·çš„é‡æ„å°†æ˜¾è‘—æå‡ä»£ç è´¨é‡å’Œå¼€å‘ä½“éªŒï¼